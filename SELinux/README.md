Запуск nginx на нестандартном порту 3-мя разными способами

1. Разрешение работы nginx на нестандартном порту с помощью переключателей setsebool 

Необходимо включить параметр nis_enabled командой \
setsebool -P nis_enabled on \
-P делает изменение постоянным \
nis_enabled on - временно разрешает службам использовать нестандартные порты, связанные с NIS (Network Information Service) 

После изменений необходимо перезапустить nginx \
Для отката изменений использовать команду \
setsebool -P nis_enabled off 

2. Разрешение работы nginx на нестандартном порту с помощью добавления порта в имеющийся тип

Необходимо добавить порт в тип http_port_t \
semanage port -a -t http_port_t -p tcp 4881 \
port -a добавляет новую запись в список портов \
-t http_port_t связывает порт с типом, разрешённым для веб-серверов \
-p tcp указывает протокол \
После изменений необходимо перезапустить nginx \
Откат изменений делается командой  \
semanage port -d -t http_port_t -p tcp 4881 

3. Разрешение работы nginx на нестандартном порту при помощи формирования и установки модуля SELinux

Необходимо при помощи утилиты audit2allow на основе логов SELinux создать модуль \
grep nginx /var/log/audit/audit.log | audit2allow -M nginx \
audit2allow преобразует ошибки из логов в правила SELinux. -M nginx генерирует модуль и исходный файл политики \
В выводе audit2allow сообщит команду, при помощи которой можно активировать модуль: \
semodule -i nginx.pp \
После установки модуля новые правила становятся частью политики SELinux \
После изменений можно запустить nginx \
Откат изменений делается командой \
semodule -r nginx 
