***Запуск nginx на нестандартном порту 3-мя разными способами***

1. Разрешение работы nginx на нестандартном порту с помощью переключателей setsebool 

Необходимо включить параметр nis_enabled командой \
setsebool -P nis_enabled on \
-P делает изменение постоянным \
nis_enabled on - временно разрешает службам использовать нестандартные порты, связанные с NIS (Network Information Service) 

После изменений необходимо перезапустить nginx \
Для отката изменений использовать команду \
setsebool -P nis_enabled off 

2. Разрешение работы nginx на нестандартном порту с помощью добавления порта в имеющийся тип

Необходимо добавить порт в тип http_port_t \
semanage port -a -t http_port_t -p tcp 4881 \
port -a добавляет новую запись в список портов \
-t http_port_t связывает порт с типом, разрешённым для веб-серверов \
-p tcp указывает протокол \
После изменений необходимо перезапустить nginx \
Откат изменений делается командой  \
semanage port -d -t http_port_t -p tcp 4881 

3. Разрешение работы nginx на нестандартном порту при помощи формирования и установки модуля SELinux

Необходимо при помощи утилиты audit2allow на основе логов SELinux создать модуль \
grep nginx /var/log/audit/audit.log | audit2allow -M nginx \
audit2allow преобразует ошибки из логов в правила SELinux. -M nginx генерирует модуль и исходный файл политики \
В выводе audit2allow сообщит команду, при помощи которой можно активировать модуль: \
semodule -i nginx.pp \
После установки модуля новые правила становятся частью политики SELinux \
После изменений можно запустить nginx \
Откат изменений делается командой \
semodule -r nginx 

\
\
***Обеспечение работоспособности приложения при включенном SELinux***

Возможные решения проблемы
1. Изменить тип контекста для каталога /etc/named на named_zone_t с помощью команды:
chcon -R -t named_zone_t /etc/named\
Преимущества: Простое и быстрое решение\
Недостатки: Временное изменение, которое сбрасывается при перемаркировке файлов (например, через restorecon)

2. Сгенерировать модуль SELinux на основе логов и установить его:
grep named /var/log/audit/audit.log | audit2allow -M named_custom\
semodule -i named_custom.pp\
Преимущества: Постоянное решение, сохраняется после перезагрузки\
Недостатки: Требует дополнительных шагов и анализа логов

3. Переместить файлы зон в каталог /var/named, где SELinux автоматически назначает тип named_zone_t:
Преимущества: Соответствует стандартной конфигурации BIND, не требует изменения политик SELinux\
Недостатки: Требует изменения конфигурации named.conf и структуры каталогов

Выбранный способ - третий, переместить файлы зон из /etc/named в /var/named. Это стандартная практика для BIND при включенном SELinux, так как:
- Каталог /var/named автоматически имеет контекст named_zone_t
- Не требуется дополнительных изменений SELinux-политик
- Решение сохраняется после перезагрузки и соответствует рекомендациям безопасности

Для этого был изменен плейбук и обновлены пути в named.conf
